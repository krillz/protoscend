<h1>Maintenance Requests</h1>

<table class="table">
  <thead>
    <%= sortable_header "id", "#" %>
    <%= sortable_header "routes.name", "Route" %>
    <%= sortable_header "users.first_name", "Reporter" %>
    <%= sortable_header "issue" %>
    <%= sortable_header "reason" %>
    <%= sortable_header "priority" %>
    <%= sortable_header "created_at", "Date" %>
  </thead>
  <tbody>
    <% @requests.each do |request| %>
      <tr>
        <td><%= link_to request.id, maintenance_request_path(request.id) %></td>
        <td><%= request.route.name %></td>
        <td><%= request.user.name %></td>
        <td><%= request.issue %></td>
        <td><%= request.reason[0..36] + " ..." %></td>
        <td><%= request.priority %></td>
        <td><%= request.created_at.strftime("%b %d, %Y") %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @requests %>
